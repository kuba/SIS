<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      xmlns:py="http://genshi.edgewall.org/">
    <xi:include href="../base.xml" />
    <head>
        <title>Substitutions table</title>
    </head>
    <body>
        <h1>Substitutions for: <a href="/z/${c.date.date()}">${c.date.date()}</a></h1>
        <h2><a href="${h.url('substitutions')}">edit</a></h2>
        <table border="1">
            <tr>
                <th>Name of the absent teacher</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>8</th>
            </tr>
            <tr py:for="t, s in c.before.items()">
                <td>$t.name_with_title</td>
                <td py:for="x in range(1, 9)" width="30px">
                    <py:choose>
                        <py:when test="s.has_key(x)">
                            ${'/'.join(["%s%s" % (group.full_name(c.year), part if part is not None else '') for group, part in s[x]])}
                        </py:when>
                        <py:otherwise>&nbsp;</py:otherwise>
                    </py:choose>
                </td>
            </tr>
            <tr>
                <th>Name of the substituting teacher</th>
                <th>1</th>
                <th>2</th>
                <th>3</th>
                <th>4</th>
                <th>5</th>
                <th>6</th>
                <th>7</th>
                <th>8</th>
            </tr>
            <tr py:for="t, s in c.after.items()">
                <td>${t.name_with_title}</td>
                <td py:for="x in range(1, 9)" width="30px">
                    <py:choose>
                        <py:when test="s.has_key(x)">
                            ${'/'.join(["%s%s" % (group.full_name(c.year), part if part is not None else '') for group, part in s[x]])}
                        </py:when>
                        <py:otherwise>&nbsp;</py:otherwise>
                    </py:choose>
                </td>
            </tr>
            <tr>
                <td colspan="9">
                    <strong>Comments:</strong>
                    <py:if test="len(c.released)>0">
                        Released:
                        <py:for each="order, released in c.released.items()">
                                ${', '.join(["%s%s" % (group.full_name(c.year), part if part is not None else '') for group, part in released])}
                                L.-${order}
                        </py:for>
                    </py:if>
                </td>
            </tr>
        </table>
        <h3>Debug:</h3>
        <pre>${c.debug}</pre>
    </body>
</html>
